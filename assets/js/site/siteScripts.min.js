/*! Morgan Timms -- Timms.IO 2017-11-01 */

function submitSearch(e){e.preventDefault(),document.location.href="/search/?query="+$("#search-string").val().trim()}$(document).ready($(".postDate").each(function(e,t){t.innerHTML=moment(t.innerHTML,"YYYY-MM-DD HH:mm Z").fromNow()})),$(document).ready($(".jsonly").show());var multi=function(){var e=function(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(e,!1,!0),t.dispatchEvent(n)},t=function(t,n){var a=t.options[n.target.getAttribute("multi-index")];a.disabled||(a.selected=!a.selected,e("change",t))},n=function(e,t){if(e.wrapper.selected.innerHTML="",e.wrapper.non_selected.innerHTML="",e.wrapper.search)var n=e.wrapper.search.value;for(var a=0;a<e.options.length;a++){var r=e.options[a],i=r.value,c=r.textContent||r.innerText,d=document.createElement("a");if(d.tabIndex=0,d.className="item",d.innerHTML=c,d.setAttribute("role","button"),d.setAttribute("data-value",i),d.setAttribute("multi-index",a),r.disabled&&(d.className+=" disabled"),r.selected){d.className+=" selected";var l=d.cloneNode(!0);e.wrapper.selected.appendChild(l)}(!n||n&&c.toLowerCase().indexOf(n.toLowerCase())>-1)&&e.wrapper.non_selected.appendChild(d)}};return function(e,a){if(a=void 0!==a?a:{},a.enable_search=void 0===a.enable_search||a.enable_search,a.search_placeholder=void 0!==a.search_placeholder?a.search_placeholder:"Search...",null==e.dataset.multijs&&"SELECT"==e.nodeName&&e.multiple){e.style.display="none",e.setAttribute("data-multijs",!0);var r=document.createElement("div");if(r.className="multi-wrapper",a.enable_search){var i=document.createElement("input");i.className="search-input",i.type="text",i.setAttribute("placeholder",a.search_placeholder),i.addEventListener("input",function(){n(e)}),r.appendChild(i),r.search=i}var c=document.createElement("div");c.className="non-selected-wrapper";var d=document.createElement("div");d.className="selected-wrapper",r.addEventListener("click",function(n){n.target.getAttribute("multi-index")&&t(e,n)}),r.addEventListener("keypress",function(n){var a=32===n.keyCode||13===n.keyCode;n.target.getAttribute("multi-index")&&a&&(n.preventDefault(),t(e,n))}),r.appendChild(c),r.appendChild(d),r.non_selected=c,r.selected=d,e.wrapper=r,e.parentNode.insertBefore(r,e.nextSibling),n(e),e.addEventListener("change",function(){n(e)})}}}();"undefined"!=typeof jQuery&&function(e){e.fn.multi=function(t){return t=void 0!==t?t:{},this.each(function(){var n=e(this);multi(n.get(0),t)})}}(jQuery);